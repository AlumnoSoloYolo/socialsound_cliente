{% extends 'principal.html' %}

{% block contenido %}
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container mt-4">
    <h1 class="mb-4">Álbumes de {{ nombre_usuario }}</h1>

    {% if lista_albumes %}
        {% for album in lista_albumes %}
            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="card-title">Álbum: {{ album.titulo }}</h2>
                </div>
                
                <div class="card-body">
                    <!-- Datos del Álbum -->
                    <div class="mb-4">
                        <h3>Información del Álbum</h3>
                        {% if album.portada %}
                            <img src="{{ album.portada.url }}" alt="Portada del álbum" class="img-fluid mb-3" style="max-width: 300px;">
                        {% endif %}
                        <p>Artista: {{ album.artista }}</p>
                        <p>Fecha de subida: {{ album.fecha_subida }}</p>
                        <p>Descripción: {{ album.descripcion }}</p>
                    </div>

                    <!-- Datos del Detalle del Álbum -->
                    {% if album.detalle_album %}
                        <div class="mb-4">
                            <h3>Detalles del Álbum</h3>
                            <div class="row">
                                <div class="col-md-6">
                                    <p>Productor: {{ album.detalle_album.productor }}</p>
                                    <p>Estudio de grabación: {{ album.detalle_album.estudio_grabacion }}</p>
                                    <p>Número de pistas: {{ album.detalle_album.numero_pistas }}</p>
                                </div>
                                <div class="col-md-6">
                                    <p>Sello discográfico: {{ album.detalle_album.sello_discografico }}</p>
                                    <p>Número de comentarios: {{ album.detalle_album.numero_comentarios }}</p>
                                </div>
                            </div>
                        </div>
                    {% endif %}

                    <!-- Lista de Canciones -->
                    {% if album.canciones %}
                        <div>
                            <h3>Canciones del Álbum:</h3>
                            {% for cancion in album.canciones %}
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <h4>{{ cancion.titulo }}</h4>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p>Artista: {{ cancion.artista }}</p>
                                                <p>Género: {{ cancion.etiqueta }}</p>
                                                <p>Fecha de subida: {{ cancion.fecha_subida }}</p>
                                                {% if cancion.portada %}
                                                    <img src="{{ cancion.portada.url }}" alt="Portada de la canción" class="img-fluid mb-3" style="max-width: 200px;">
                                                {% endif %}
                                                {% if cancion.archivo_audio %}
                                                    <p>Archivo de audio: {{ cancion.archivo_audio.url }}</p>
                                                {% endif %}
                                            </div>

                                            <!-- Detalles de la Canción -->
                                            {% if cancion.detalles %}
                                                <div class="col-md-6">
                                                    <h5>Detalles de la Canción:</h5>
                                                    <p>Letra: {{ cancion.detalles.letra }}</p>
                                                    <p>Créditos: {{ cancion.detalles.creditos }}</p>
                                                    <p>Duración: {{ cancion.detalles.duracion_formateada }}</p>
                                                    <p>Idioma: {{ cancion.detalles.idioma }}</p>
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="alert alert-info">Este álbum no tiene canciones</p>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="alert alert-warning">No hay álbumes disponibles</p>
    {% endif %}
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}